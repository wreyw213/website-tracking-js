// Create the node object
const node = {
    "nodeType": "html",
    "attributes": {},
    "children": [
        {
            "nodeType": "head",
            "attributes": {},
            "children": [
                {
                    "nodeType": "title",
                    "attributes": {},
                    "children": [],
                    "textContent": "Tracking WebPage"
                },
                {
                    "nodeType": "link",
                    "attributes": {
                        "rel": "stylesheet",
                        "href": "styles.css"
                    },
                    "children": []
                },
                {
                    "nodeType": "script",
                    "attributes": {},
                    "children": [],
                    "textContent": "(function (h, o, t, j, a, r) {\n            h.hj = h.hj || function () { (h.hj.q = h.hj.q || []).push(arguments) };\n            h._hjSettings = { hjid: 3399883, hjsv: 6 };\n            a = o.getElementsByTagName('head')[0];\n            r = o.createElement('script'); r.async = 1;\n            r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;\n            a.appendChild(r);\n        })(window, document, 'https://static.hotjar.com/c/hotjar-', '.js?sv=');\n\n        // (function (h, o, t, j, a, r) {\n        //     h.hj = h.hj || function () { (h.hj.q = h.hj.q || []).push(arguments) };\n        //     h._hjSettings = { hjid: 3399883, hjsv: 6 };\n        //     a = o.getElementsByTagName('head')[0];\n        //     r = o.createElement('script'); r.async = 1;\n        //     r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;\n        //     a.appendChild(r);\n        // })(window, document, 'http://56a0-122-173-24-198.ngrok.io/read-data', '.js?sv=');"
                },
                {
                    "nodeType": "script",
                    "attributes": {
                        "async": "",
                        "src": "https://static.hotjar.com/c/hotjar-3399883.js?sv=6"
                    },
                    "children": []
                },
                {
                    "nodeType": "script",
                    "attributes": {
                        "async": "",
                        "src": "https://script.hotjar.com/modules.13d69dc2039c752a80a3.js",
                        "charset": "utf-8"
                    },
                    "children": []
                }
            ],
            "textContent": "Tracking WebPage\n    \n\n    \n        (function (h, o, t, j, a, r) {\n            h.hj = h.hj || function () { (h.hj.q = h.hj.q || []).push(arguments) };\n            h._hjSettings = { hjid: 3399883, hjsv: 6 };\n            a = o.getElementsByTagName('head')[0];\n            r = o.createElement('script'); r.async = 1;\n            r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;\n            a.appendChild(r);\n        })(window, document, 'https://static.hotjar.com/c/hotjar-', '.js?sv=');\n\n        // (function (h, o, t, j, a, r) {\n        //     h.hj = h.hj || function () { (h.hj.q = h.hj.q || []).push(arguments) };\n        //     h._hjSettings = { hjid: 3399883, hjsv: 6 };\n        //     a = o.getElementsByTagName('head')[0];\n        //     r = o.createElement('script'); r.async = 1;\n        //     r.src = t + h._hjSettings.hjid + j + h._hjSettings.hjsv;\n        //     a.appendChild(r);\n        // })(window, document, 'http://56a0-122-173-24-198.ngrok.io/read-data', '.js?sv=');"
        },
        {
            "nodeType": "body",
            "attributes": {},
            "children": [
                {
                    "nodeType": "h1",
                    "attributes": {},
                    "children": [],
                    "textContent": "Submit A Form"
                },
                {
                    "nodeType": "div",
                    "attributes": {
                        "id": "upload-form"
                    },
                    "children": [],
                    "textContent": "Name\n        \n        Email\n        \n        Address"
                },
                {
                    "nodeType": "div",
                    "attributes": {
                        "id": "upload-form"
                    },
                    "children": [],
                    "textContent": "Name\n        \n        Email\n        \n        Address"
                },
                {
                    "nodeType": "div",
                    "attributes": {
                        "id": "upload-form"
                    },
                    "children": [],
                    "textContent": "Name\n        \n        Email\n        \n        Address"
                },
                {
                    "nodeType": "div",
                    "attributes": {
                        "id": "upload-form"
                    },
                    "children": [],
                    "textContent": "Name\n        \n        Email\n        \n        Address"
                },
                {
                    "nodeType": "div",
                    "attributes": {
                        "id": "upload-form"
                    },
                    "children": [],
                    "textContent": "Name\n        \n        Email\n        \n        Address"
                },
                {
                    "nodeType": "div",
                    "attributes": {
                        "id": "upload-form"
                    },
                    "children": [],
                    "textContent": "Name\n        \n        Email\n        \n        Address"
                },
                {
                    "nodeType": "button",
                    "attributes": {
                        "type": "submit",
                        "id": "end-session-btn"
                    },
                    "children": [],
                    "textContent": "End Session"
                },
                {
                    "nodeType": "button",
                    "attributes": {
                        "id": "capture"
                    },
                    "children": [],
                    "textContent": "Capture Screenshot"
                },
                {
                    "nodeType": "script",
                    "attributes": {
                        "src": "https://code.jquery.com/jquery-3.6.0.min.js"
                    },
                    "children": []
                },
                {
                    "nodeType": "script",
                    "attributes": {
                        "src": "https://html2canvas.hertzen.com/dist/html2canvas.min.js"
                    },
                    "children": []
                },
                {
                    "nodeType": "div",
                    "attributes": {
                        "id": "result"
                    },
                    "children": []
                },
                {
                    "nodeType": "script",
                    "attributes": {
                        "src": "app.js"
                    },
                    "children": []
                },
                {
                    "nodeType": "iframe",
                    "attributes": {
                        "id": "_hjSafeContext_70086462",
                        "title": "_hjSafeContext",
                        "tabindex": "-1",
                        "aria-hidden": "true",
                        "src": "about:blank",
                        "style": "display: none !important; width: 1px !important; height: 1px !important; opacity: 0 !important; pointer-events: none !important;"
                    },
                    "children": []
                }
            ],
            "textContent": "Submit A Form\n    \n        Name\n        \n        Email\n        \n        Address\n        \n        \n    \n\n    \n        Name\n        \n        Email\n        \n        Address\n        \n        \n    \n\n    \n        Name\n        \n        Email\n        \n        Address\n        \n        \n    \n\n\n\n    \n        Name\n        \n        Email\n        \n        Address\n        \n        \n    \n\n\n    \n        Name\n        \n        Email\n        \n        Address\n        \n        \n    \n\n\n    \n        Name\n        \n        Email\n        \n        Address\n        \n        \n    \n\n    End Session\n\n    Capture Screenshot"
        }
    ]
}

// Create the HTML element tree from the node object
const createHtmlElement = function (node) {
    const el = document.createElement(node.nodeType);

    if (node.attributes) {
        for (let attr in node.attributes) {
            el.setAttribute(attr, node.attributes[attr]);
        }
    }

    if (node.textContent) {
        el.textContent = node.textContent;
    }

    if (node.children) {
        for (let child of node.children) {
            el.appendChild(createHtmlElement(child));
        }
    }

    return el;
};

// Create the root element and append the generated HTML tree
const root = document.createElement("div");
root.appendChild(createHtmlElement(node));

// Add the root element to the document body
document.body.appendChild(root);
